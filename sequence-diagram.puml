@startuml
!theme plain

' === STYLING CONFIGURATION ===
skinparam defaultFontSize 26
skinparam defaultFontName Arial Black
skinparam titleFontSize 36
skinparam titleFontStyle bold
skinparam participantFontSize 24
skinparam participantFontStyle bold
skinparam arrowFontSize 22
skinparam arrowFontStyle bold
skinparam noteFontSize 20
skinparam noteFontStyle bold

' === SPACING & LAYOUT ===
skinparam sequenceParticipantPadding 25
skinparam sequenceArrowPadding 15
skinparam sequenceGroupBodyBackgroundColor #f8f8f8
skinparam sequenceGroupHeaderFontSize 24
skinparam sequenceGroupHeaderFontStyle bold

' === COLORS & STYLING ===
skinparam backgroundColor white
skinparam participant {
    BackgroundColor #e1f5fe
    BorderColor #0277bd
    FontColor black
}
skinparam note {
    BackgroundColor #fff3e0
    BorderColor #f57c00
    FontColor black
}
skinparam arrow {
    Color #1565c0
    FontColor black
}

' === USER INTERFACE ===
participant "ğŸŒ±\n**USER**" as User

' === FRONTEND LAYER ===  
participant "ğŸ–¥ï¸\n**FRONTEND**" as Frontend

' === BACKEND SERVICES ===
participant "âš¡\n**BACKEND API**" as API
participant "ğŸ›°ï¸\n**SATELLITE**" as Sentinel
participant "ğŸ§®\n**NDVI PROCESSOR**" as Processor

' === STORAGE & VERIFICATION ===
participant "ğŸ“¦\n**FILECOIN**" as Filecoin
participant "ğŸ²\n**PYTH ENTROPY**" as Pyth
participant "ğŸ”\n**ZK PROOF**\n(vLayer)" as ZK

' === BLOCKCHAIN LAYER ===
participant "â›“ï¸\n**BLOCKCHAIN**" as Blockchain
participant "ğŸ’°\n**TOKENS**" as Tokens

' ================================================================
== ğŸ“‹ **VERIFICATION REQUEST** ==
' ================================================================

User -> Frontend: **ğŸ” Submit Verification Request**
note over User, Frontend #lightblue
  **Input: Coordinates, Time Period, Forest Boundaries, Wallet Address**
end note

Frontend -> API: **ğŸ“¤ POST /verify/request**

' ================================================================
== ğŸ›°ï¸ **SATELLITE DATA PROCESSING** ==
' ================================================================

API -> Sentinel: **ğŸ“¡ Fetch Satellite Imagery**
note right of Sentinel #lightgreen
  **Sentinel Hub API - Multi-spectral bands**
end note
Sentinel --> API: **ğŸ“Š Satellite Bands (B4, B8)**

API -> Processor: **ğŸ”¬ Calculate NDVI & Forest Analysis**
note over Processor #lightyellow
  **Mathematical NDVI calculation + Forest health metrics (No AI)**
end note
Processor --> API: **ğŸ“ˆ Forest Health + Environmental Data**

' ================================================================
== ğŸ’¾ **DECENTRALIZED STORAGE** ==
' ================================================================

API -> Filecoin: **ğŸ—„ï¸ Store Verified Analysis**
note over API, Filecoin #lightcyan
  **Permanent Storage - JSON analysis results stored on-chain**
end note
Filecoin --> API: **ğŸ”— Storage CID**

' ================================================================
== ğŸ” **ZERO-KNOWLEDGE VERIFICATION** ==
' ================================================================

API -> Pyth: **ğŸ¯ Request Entropy**
note over API, Pyth #lavender
  **Randomness Source for ZK proof generation**
end note
Pyth --> API: **ğŸ² Random Entropy Value**

API -> ZK: **âš™ï¸ Generate Verification Proof**
note over API, ZK #mistyrose
  **Zero-Knowledge Proof: Data integrity + Authenticity + Privacy**
end note
ZK --> API: **âœ… ZK Proof + Verification Key**

' ================================================================
== â›“ï¸ **BLOCKCHAIN RECORDING** ==
' ================================================================

API -> Blockchain: **ğŸ“ Store Verification Record**
note over API, Blockchain #lightsteelblue
  **Immutable Record - Permanent proof of verification on-chain**
end note
Blockchain --> API: **ğŸ“‹ Transaction Hash + Record ID**

' ================================================================
== ğŸ’° **TOKEN REWARDS** ==
' ================================================================

alt **âœ… Verification Successful**
    API -> Tokens: **ğŸª™ Mint/Transfer Tokens**
    note over API, Tokens #lightgreen
      **Environmental Rewards - Tokens awarded for verified forest data**
    end note
    Tokens --> API: **ğŸ’ Token Transaction Confirmed**
    API --> Frontend: **ğŸ‰ Verification Complete + Tokens Awarded**
    
else **âŒ Verification Failed**
    API --> Frontend: **âš ï¸ Verification Failed - No Tokens**
end

' ================================================================
== ğŸ“± **USER RESPONSE** ==
' ================================================================

Frontend --> User: **ğŸ“Š Transparent Verification Results + Rewards**

@enduml 